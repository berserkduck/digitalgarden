---
{"dg-publish":true,"permalink":"/Pandas/聚合函数/相关性/"}
---

# 相关性
**相关性**是一个统计概念，用于衡量两个变量之间的线性关系的强度和方向。
如果一个变量增加，另一个变量的值也随之增加或减小，则这两个变量存在相关性

<div class="transclusion internal-embed is-loaded"><a class="markdown-embed-link" href="/excalidraw//" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a><div class="markdown-embed">




==⚠  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. ⚠== You can decompress Drawing data with the command palette: 'Decompress current Excalidraw file'. For more info check in plugin settings under 'Saving'


# Excalidraw Data
## Text Elements
正相关 
负相关 


</div></div>

# 相关系数
相关系数是衡量两个变量间<u>相关性强弱</u>的一个值，最常见是 **皮尔逊相关系数**，范围为 -1 到 1：
- **1**：两个变量之间完全正相关
- **0**：两个变量之间没有线性关系
- **-1**：两个变量之间的关系是完全反向的
## 常用相关系数
- **皮尔逊相关系数**（Pearson correlation coefficient）：适用于测量线性关系，正态分布数据
- **斯皮尔曼等级相关系数**（Spearman rank correlation coefficient）：适用于非线性关系，非正态分布的数据
- **肯德尔等级相关系数**（Kendall rank correlation coefficient）：适用于小样本和有顺序的数据。
# corr函数
Pandas中使用`corr()`函数计算相关系数
```python
df.corr(method="pearson")
```
method的默认值为pearson，也可以指定为spearman或kendall

```python
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

# 设置随机种子以确保结果可复现
np.random.seed(0)

# 生成正相关数据
x_pos = np.linspace(0, 9, 10)  # 从 0 到 9 的均匀分布
noise_pos = np.random.normal(0, 1, 10)  # 随机噪声
y_pos = x_pos + noise_pos  # 正相关数据

# 生成负相关数据
x_neg = np.linspace(0, 9, 10)  # 从 0 到 9 的均匀分布
noise_neg = np.random.normal(0, 1, 10)  # 随机噪声
y_neg = -x_neg + noise_neg  # 负相关数据

# 创建 DataFrame
df_pos = pd.DataFrame({'X': x_pos, 'Y': y_pos})
df_neg = pd.DataFrame({'X': x_neg, 'Y': y_neg})

# 计算相关系数
corr_pos = df_pos.corr()
corr_neg = df_neg.corr()

# 打印相关系数
print("Positive Correlation:\n", corr_pos)
print("\nNegative Correlation:\n", corr_neg)

# 绘制散点图
plt.figure(figsize=(12, 6))

# 正相关数据
plt.subplot(1, 2, 1)
plt.scatter(df_pos['X'], df_pos['Y'])
plt.title('Positive Correlation')
plt.xlabel('X')
plt.ylabel('Y')

# 负相关数据
plt.subplot(1, 2, 2)
plt.scatter(df_neg['X'], df_neg['Y'])
plt.title('Negative Correlation')
plt.xlabel('X')
plt.ylabel('Y')

plt.tight_layout()
plt.show()
```

    Positive Correlation:
               X         Y
    X  1.000000  0.943825
    Y  0.943825  1.000000
    
    Negative Correlation:
               X         Y
    X  1.000000 -0.982801
    Y -0.982801  1.000000

![output_0_1.png](/img/user/Pandas/%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0/output_0_1.png)



